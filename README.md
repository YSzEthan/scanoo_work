# Scanoo - æƒ³æ³•æ”¶é›†å™¨

ä¸€å€‹ç¾ä»£åŒ–çš„æƒ³æ³•æ”¶é›†èˆ‡ç®¡ç†æ‡‰ç”¨ï¼Œä½¿ç”¨ Next.js 16 + React 19 + Supabase æ§‹å»ºã€‚

![Next.js](https://img.shields.io/badge/Next.js-16.0.3-black)
![React](https://img.shields.io/badge/React-19.2.0-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5-blue)
![Tailwind CSS](https://img.shields.io/badge/Tailwind-4.0-38bdf8)

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å®Œæ•´ CRUD**ï¼šæ–°å¢ã€è®€å–ã€ç·¨è¼¯ã€åˆªé™¤æƒ³æ³•
- âœ… **åˆ†é ç€è¦½**ï¼šæ¯é  10 ç­†ï¼Œæ™ºèƒ½åˆ†é æ§åˆ¶
- âœ… **Markdown æ”¯æ´**ï¼šè±å¯Œçš„æ–‡å­—æ’ç‰ˆï¼ˆç²—é«”ã€æ–œé«”ã€ç¨‹å¼ç¢¼ã€é€£çµç­‰ï¼‰
- âœ… **å³æ™‚é€šçŸ¥**ï¼šToast é€šçŸ¥ç³»çµ±å–ä»£å‚³çµ± alert

### ç”¨æˆ¶é«”é©—
- âŒ¨ï¸ **éµç›¤å¿«æ·éµ**ï¼šEnter é€å‡ºï¼ŒShift+Enter æ›è¡Œ
- ğŸŒ **ä¸­æ–‡è¼¸å…¥æ³•å„ªåŒ–**ï¼šæ³¨éŸ³ã€æ‹¼éŸ³é¸å­—ä¸æœƒèª¤è§¸ç™¼
- ğŸ¨ **è¼‰å…¥å‹•ç•«**ï¼šéª¨æ¶å±æä¾›æµæš¢çš„è¦–è¦ºåé¥‹
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šå®Œç¾é©é…æ¡Œé¢å’Œç§»å‹•è£ç½®

### æŠ€è¡“äº®é»
- ğŸ”’ **é¡å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript æ”¯æ´ï¼Œstrict æ¨¡å¼
- ğŸ—ï¸ **æ¨¡çµ„åŒ–æ¶æ§‹**ï¼šè·è²¬åˆ†é›¢ï¼Œæ˜“æ–¼ç¶­è­·å’Œæ¸¬è©¦
- âš¡ **æ•ˆèƒ½å„ªåŒ–**ï¼šåˆ†é æŸ¥è©¢ã€è³‡æ–™åº«ç´¢å¼•ã€Context å„ªåŒ–
- ğŸ¯ **æœ€ä½³å¯¦è¸**ï¼šéµå¾ª React å’Œ Next.js å®˜æ–¹å»ºè­°

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Node.js 18+
- npm æˆ– yarn
- Supabase å¸³è™Ÿ

### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†å°ˆæ¡ˆ**
```bash
git clone <your-repo-url>
cd scanoo
```

2. **å®‰è£ä¾è³´**
```bash
npm install
```

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**

å»ºç«‹ `.env.local` æª”æ¡ˆï¼š
```env
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„_Supabase_å°ˆæ¡ˆ_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„_Supabase_åŒ¿åé‡‘é‘°
```

å–å¾—æ–¹å¼ï¼š
1. ç™»å…¥ [Supabase Dashboard](https://supabase.com/dashboard)
2. é¸æ“‡ä½ çš„å°ˆæ¡ˆ
3. é€²å…¥ **Project Settings** â†’ **API**
4. è¤‡è£½ **Project URL** å’Œ **anon public** key

4. **è¨­å®šè³‡æ–™åº«**

åœ¨ Supabase SQL Editor åŸ·è¡Œï¼š

```sql
-- å»ºç«‹è³‡æ–™è¡¨
CREATE TABLE ideas (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  content TEXT NOT NULL CHECK (char_length(content) > 0 AND char_length(content) <= 1000),
  created_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

-- å»ºç«‹ç´¢å¼•ï¼ˆæå‡æŸ¥è©¢æ•ˆèƒ½ï¼‰
CREATE INDEX idx_ideas_created_at_desc ON ideas(created_at DESC);

-- æ›´æ–°çµ±è¨ˆè³‡æ–™
ANALYZE ideas;

-- å•Ÿç”¨è¡Œç´šå®‰å…¨ï¼ˆRLSï¼‰
ALTER TABLE ideas ENABLE ROW LEVEL SECURITY;

-- å…è¨±å…¬é–‹å­˜å–ï¼ˆé–‹ç™¼ç”¨ï¼Œç”Ÿç”¢ç’°å¢ƒè«‹èª¿æ•´ï¼‰
CREATE POLICY "å…è¨±å…¬é–‹è®€å–" ON ideas FOR SELECT USING (true);
CREATE POLICY "å…è¨±å…¬é–‹æ–°å¢" ON ideas FOR INSERT WITH CHECK (true);
CREATE POLICY "å…è¨±å…¬é–‹æ›´æ–°" ON ideas FOR UPDATE USING (true);
CREATE POLICY "å…è¨±å…¬é–‹åˆªé™¤" ON ideas FOR DELETE USING (true);
```

5. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**
```bash
npm run dev
```

é–‹å•Ÿç€è¦½å™¨è¨ªå• [http://localhost:3000](http://localhost:3000)

---

## ğŸ“¦ æŠ€è¡“æ£§

### å‰ç«¯æ¡†æ¶
- **Next.js 16.0.3** - React æ¡†æ¶ï¼ŒApp Router
- **React 19.2.0** - UI å‡½å¼åº«ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰
- **TypeScript 5** - é¡å‹å®‰å…¨

### UI & æ¨£å¼
- **Tailwind CSS 4** - åŸå­åŒ– CSS æ¡†æ¶
- **@tailwindcss/typography** - Markdown æ’ç‰ˆæ¨£å¼
- **react-markdown** - Markdown è§£æå™¨
- **remark-gfm** - GitHub Flavored Markdown

### å¾Œç«¯ & è³‡æ–™åº«
- **Supabase** - PostgreSQL é›²ç«¯è³‡æ–™åº«
- **@supabase/supabase-js** - Supabase å®¢æˆ¶ç«¯

### é–‹ç™¼å·¥å…·
- **ESLint 9** - ä»£ç¢¼æª¢æŸ¥
- **PostCSS** - CSS è™•ç†

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
scanoo/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Toast.tsx              # Toast é€šçŸ¥çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ IdeaCard.tsx           # æƒ³æ³•å¡ç‰‡ï¼ˆå«ç·¨è¼¯/åˆªé™¤/Markdown æ¸²æŸ“ï¼‰
â”‚   â”‚   â””â”€â”€ IdeaCardSkeleton.tsx   # è¼‰å…¥éª¨æ¶å±
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ ToastContext.tsx       # Toast å…¨å±€ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useIdeas.ts            # æƒ³æ³• CRUD è‡ªå®šç¾© Hook
â”‚   â”œâ”€â”€ layout.tsx                 # æ ¹ä½ˆå±€ï¼ˆåŒ…å« ToastProviderï¼‰
â”‚   â”œâ”€â”€ page.tsx                   # ä¸»é é¢
â”‚   â””â”€â”€ globals.css                # å…¨å±€æ¨£å¼ + å‹•ç•«
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts                # Supabase å®¢æˆ¶ç«¯é…ç½®
â”œâ”€â”€ public/                        # éœæ…‹è³‡æº
â”œâ”€â”€ .env.local.example             # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ package.json                   # å°ˆæ¡ˆä¾è³´
â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â”œâ”€â”€ next.config.ts                 # Next.js é…ç½®
â””â”€â”€ README.md                      # æœ¬æ–‡ä»¶
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½èªªæ˜

### 1. æƒ³æ³•ç®¡ç†ï¼ˆCRUDï¼‰

#### æ–°å¢æƒ³æ³•
- è¼¸å…¥æ¡†æ”¯æ´ Markdown èªæ³•
- æœ€å¤š 1000 å­—å…ƒ
- Enter éµå¿«é€Ÿé€å‡ºï¼ŒShift+Enter æ›è¡Œ
- æ”¯æ´ä¸­æ–‡è¼¸å…¥æ³•ï¼ˆæ³¨éŸ³ã€æ‹¼éŸ³ç­‰ï¼‰

#### ç·¨è¼¯æƒ³æ³•
- é»æ“Šç·¨è¼¯åœ–æ¨™é€²å…¥ç·¨è¼¯æ¨¡å¼
- å…§åµŒå¼ç·¨è¼¯ï¼Œç„¡éœ€è·³è½‰é é¢
- å–æ¶ˆ/å„²å­˜æŒ‰éˆ•

#### åˆªé™¤æƒ³æ³•
- é»æ“Šåˆªé™¤åœ–æ¨™
- é¡¯ç¤ºç¢ºèªå°è©±æ¡†ï¼Œé è¦½è¦åˆªé™¤çš„å…§å®¹
- é˜²æ­¢èª¤åˆª

### 2. Markdown æ”¯æ´

æ”¯æ´ä»¥ä¸‹èªæ³•ï¼š

| èªæ³• | æ•ˆæœ |
|------|------|
| `**ç²—é«”**` | **ç²—é«”** |
| `*æ–œé«”*` | *æ–œé«”* |
| `~~åˆªé™¤ç·š~~` | ~~åˆªé™¤ç·š~~ |
| `` `ç¨‹å¼ç¢¼` `` | `ç¨‹å¼ç¢¼` |
| `# æ¨™é¡Œ` | æ¨™é¡Œï¼ˆH1-H3ï¼‰ |
| `- åˆ—è¡¨` | ç„¡åºåˆ—è¡¨ |
| `1. åˆ—è¡¨` | æœ‰åºåˆ—è¡¨ |
| `[æ–‡å­—](ç¶²å€)` | é€£çµ |
| `> å¼•ç”¨` | å¼•ç”¨å€å¡Š |

ç¨‹å¼ç¢¼å€å¡Šï¼š
````markdown
```javascript
console.log("Hello World");
```
````

### 3. åˆ†é ç³»çµ±

- æ¯é é¡¯ç¤º 10 ç­†æƒ³æ³•
- æ™ºèƒ½é ç¢¼é¡¯ç¤ºï¼ˆç•¶å‰é  Â±2 é ï¼‰
- é¦–é å’Œæœ«é å§‹çµ‚é¡¯ç¤º
- ä½¿ç”¨ã€Œ...ã€çœç•¥ä¸­é–“é ç¢¼
- æ–°å¢æƒ³æ³•å¾Œè‡ªå‹•æ›´æ–°åˆ—è¡¨

### 4. Toast é€šçŸ¥

å–ä»£å‚³çµ± `alert()`ï¼Œæä¾›æ›´å„ªé›…çš„æç¤ºï¼š

- âœ… æˆåŠŸé€šçŸ¥ï¼ˆç¶ è‰²ï¼‰
- âŒ éŒ¯èª¤é€šçŸ¥ï¼ˆç´…è‰²ï¼‰
- âš ï¸ è­¦å‘Šé€šçŸ¥ï¼ˆé»ƒè‰²ï¼‰
- â„¹ï¸ è³‡è¨Šé€šçŸ¥ï¼ˆè—è‰²ï¼‰
- è‡ªå‹•é—œé–‰ï¼ˆé è¨­ 3 ç§’ï¼‰
- æ”¯æ´æ‰‹å‹•é—œé–‰
- æ»‘å…¥å‹•ç•«æ•ˆæœ

---

## ğŸ› ï¸ å¯ç”¨æŒ‡ä»¤

```bash
# é–‹ç™¼æ¨¡å¼
npm run dev

# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run build

# å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
npm run start

# ä»£ç¢¼æª¢æŸ¥
npm run lint
```

---

## ğŸ“Š æ”¹é€²æ­·ç¨‹

æœ¬å°ˆæ¡ˆç¶“éç³»çµ±æ€§çš„æ”¹é€²å’Œå„ªåŒ–ï¼š

### åˆå§‹ç‹€æ…‹
- åŸºæœ¬çš„æƒ³æ³•æ–°å¢å’ŒæŸ¥çœ‹åŠŸèƒ½
- ä½¿ç”¨ `alert()` é¡¯ç¤ºéŒ¯èª¤
- å–®ä¸€æª”æ¡ˆ 161 è¡Œä»£ç¢¼
- ç„¡ç·¨è¼¯/åˆªé™¤åŠŸèƒ½

### æ”¹é€²é …ç›®

#### 1. éŒ¯èª¤è™•ç†å„ªåŒ–
- âŒ `alert()` å½ˆçª—
- âœ… Toast é€šçŸ¥ç³»çµ±

#### 2. ä»£ç¢¼é‡æ§‹
- âŒ 161 è¡Œå–®ä¸€æª”æ¡ˆ
- âœ… æ¨¡çµ„åŒ– 3 å€‹ä¸»è¦æª”æ¡ˆ
  - `useIdeas.ts` - è³‡æ–™é‚è¼¯
  - `IdeaCard.tsx` - UI çµ„ä»¶
  - `page.tsx` - é é¢çµ„è£

#### 3. åŠŸèƒ½æ“´å±•
- âœ… æ–°å¢ç·¨è¼¯åŠŸèƒ½
- âœ… æ–°å¢åˆªé™¤åŠŸèƒ½ï¼ˆå«ç¢ºèªï¼‰
- âœ… åˆ†é ç³»çµ±
- âœ… Markdown æ”¯æ´

#### 4. ç”¨æˆ¶é«”é©—æå‡
- âœ… Enter é€å‡ºå¿«æ·éµ
- âœ… ä¸­æ–‡è¼¸å…¥æ³•å„ªåŒ–
- âœ… è¼‰å…¥éª¨æ¶å±
- âœ… å­—æ•¸é™åˆ¶æç¤º

#### 5. æŠ€è¡“å„ªåŒ–
- âœ… ç§»é™¤ `as any` é¡å‹è½‰æ›
- âœ… è·è²¬åˆ†é›¢ï¼ˆsubmitIdea æ¶æ§‹ï¼‰
- âœ… Context ç©©å®šåŒ–ï¼ˆuseMemoï¼‰
- âœ… è³‡æ–™åº«ç´¢å¼•å„ªåŒ–

### æ•ˆèƒ½æŒ‡æ¨™

| é …ç›® | æ”¹é€²å‰ | æ”¹é€²å¾Œ |
|------|--------|--------|
| åŠŸèƒ½æ•¸é‡ | 2ï¼ˆæ–°å¢ã€æŸ¥çœ‹ï¼‰ | 6ï¼ˆCRUD + åˆ†é  + Markdownï¼‰ |
| ä»£ç¢¼è¡Œæ•¸ | ~200 è¡Œ | ~600 è¡Œï¼ˆæ¨¡çµ„åŒ–ï¼‰ |
| é¡å‹å®‰å…¨ | æœ‰ hack | å®Œå…¨å®‰å…¨ |
| ç”¨æˆ¶é«”é©— | åŸºæœ¬ | ç¾ä»£åŒ– |

---

## ğŸ”’ å®‰å…¨æ€§è€ƒé‡

### ç•¶å‰è¨­å®šï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
- ä½¿ç”¨ Supabase åŒ¿åé‡‘é‘°
- RLS æ”¿ç­–å…è¨±å…¬é–‹å­˜å–
- é©åˆï¼šåŸå‹é–‹ç™¼ã€å…§éƒ¨æ¸¬è©¦

### ç”Ÿç”¢ç’°å¢ƒå»ºè­°
1. **åŠ å…¥ç”¨æˆ¶èªè­‰**
   - ä½¿ç”¨ Supabase Auth
   - é™åˆ¶åªæœ‰ä½œè€…å¯ä»¥ç·¨è¼¯/åˆªé™¤è‡ªå·±çš„æƒ³æ³•

2. **èª¿æ•´ RLS æ”¿ç­–**
```sql
-- åªå…è¨±ä½œè€…ç·¨è¼¯è‡ªå·±çš„æƒ³æ³•
CREATE POLICY "ä½œè€…å¯ç·¨è¼¯" ON ideas
FOR UPDATE USING (auth.uid() = user_id);

-- åªå…è¨±ä½œè€…åˆªé™¤è‡ªå·±çš„æƒ³æ³•
CREATE POLICY "ä½œè€…å¯åˆªé™¤" ON ideas
FOR DELETE USING (auth.uid() = user_id);
```

3. **å…§å®¹éæ¿¾**
   - æª¢æŸ¥æ•æ„Ÿè©å½™
   - é˜²æ­¢ XSS æ”»æ“Šï¼ˆreact-markdown å·²è™•ç†ï¼‰

4. **é€Ÿç‡é™åˆ¶**
   - ä½¿ç”¨ Supabase Edge Functions
   - æˆ–åœ¨æ‡‰ç”¨å±¤å¯¦ä½œä¸­ä»‹è»Ÿé«”

---

## ğŸš§ å·²çŸ¥é™åˆ¶

1. **åˆ†é è¨ˆæ•¸**
   - ä½¿ç”¨ `count: 'exact'` ç¢ºä¿æº–ç¢º
   - è³‡æ–™é‡å¤§æ™‚ï¼ˆ1000+ ç­†ï¼‰æŸ¥è©¢æœƒè®Šæ…¢ï¼ˆ~200msï¼‰
   - å¯è€ƒæ…®æ”¹ç”¨ä¼°ç®—æˆ–ç„¡é™æ»¾å‹•

2. **ç„¡ç”¨æˆ¶ç³»çµ±**
   - ç›®å‰ä»»ä½•äººéƒ½å¯ä»¥ç·¨è¼¯/åˆªé™¤æ‰€æœ‰æƒ³æ³•
   - ç”Ÿç”¢ç’°å¢ƒéœ€åŠ å…¥èªè­‰

3. **ç„¡æœå°‹åŠŸèƒ½**
   - è³‡æ–™å¤šæ™‚ä¸æ˜“æŸ¥æ‰¾
   - å¯åŠ å…¥å…¨æ–‡æœå°‹

---

## ğŸ”® æœªä¾†è¦åŠƒ

- [ ] ç”¨æˆ¶èªè­‰ç³»çµ±ï¼ˆSupabase Authï¼‰
- [ ] æœå°‹å’Œç¯©é¸åŠŸèƒ½
- [ ] æ¨™ç±¤åˆ†é¡ç³»çµ±
- [ ] åŒ¯å‡ºåŠŸèƒ½ï¼ˆJSONã€Markdownï¼‰
- [ ] æ·±è‰²æ¨¡å¼
- [ ] æ‹–æ›³æ’åº
- [ ] å”ä½œåŠŸèƒ½
- [ ] PWA æ”¯æ´

---

## ğŸ“ é–‹ç™¼ç­†è¨˜

### Markdown æ¸¬è©¦ç¯„ä¾‹

å»ºç«‹ä¸€å€‹æƒ³æ³•ï¼Œè²¼ä¸Šä»¥ä¸‹å…§å®¹æ¸¬è©¦ Markdownï¼š

```markdown
# æˆ‘çš„æƒ³æ³•

é€™æ˜¯ä¸€å€‹**å¾ˆæ£’çš„**æƒ³æ³•ï¼æ”¯æ´ *Markdown* èªæ³•ã€‚

## åŠŸèƒ½åˆ—è¡¨
- æ”¯æ´ Markdown
- æ”¯æ´ `ç¨‹å¼ç¢¼`
- æ”¯æ´ [é€£çµ](https://example.com)

## ç¨‹å¼ç¢¼ç¯„ä¾‹
```javascript
console.log("Hello Scanoo!");
```

> é€™æ˜¯ä¸€å¥å¼•ç”¨
```

### è³‡æ–™åº«ç¶­è­·

å®šæœŸåŸ·è¡Œä»¥å„ªåŒ–æŸ¥è©¢æ•ˆèƒ½ï¼š

```sql
-- æ›´æ–°çµ±è¨ˆè³‡æ–™
ANALYZE ideas;

-- æª¢æŸ¥ç´¢å¼•ç‹€æ…‹
SELECT indexname, indexdef
FROM pg_indexes
WHERE tablename = 'ideas';
```

---

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ æˆæ¬Š

MIT License

---

## ğŸ™ è‡´è¬

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Supabase](https://supabase.com/) - å¾Œç«¯æœå‹™
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [react-markdown](https://github.com/remarkjs/react-markdown) - Markdown è§£æ

---

**ç”± Claude Code å”åŠ©é–‹ç™¼** ğŸ¤–
